import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.D55ewHcJ.js";import{s as w}from"./supabaseClient.BX-vlr2_.js";function k(){const[n,u]=s.useState(""),[a,i]=s.useState(""),[r,c]=s.useState("FL"),[p,d]=s.useState(""),[x,m]=s.useState(""),[b,g]=s.useState(!1),[h,f]=s.useState(null),[y,o]=s.useState(null),j=async t=>{t.preventDefault(),g(!0),f(null),o(null);try{const{error:l}=await w.from("business_suggestions").insert({name:n,city:a||null,state:r||null,website:p||null,notes:x||null});if(l){console.error(l),o("Something went wrong. Please try again.");return}f("Thank you! Your suggestion was submitted."),u(""),i(""),c("FL"),d(""),m(""),typeof window<"u"&&window.plausible&&window.plausible("SuggestionSubmitted",{props:{city:a||"unknown",state:r||"unknown"}})}catch(l){console.error(l),o("Unexpected error occurred.")}finally{g(!1)}};return e.jsxs("section",{className:"rounded-2xl border border-purple-900/40 bg-black/60 px-4 py-4 sm:px-5 sm:py-5",children:[e.jsx("h2",{className:"text-sm font-semibold text-slate-50",children:"Suggest a Black-owned business"}),e.jsx("p",{className:"mt-1 text-[11px] text-slate-400",children:"Know a spot that should be on the radar? Share it here and we’ll review it before adding it to the directory."}),e.jsxs("form",{onSubmit:j,className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[11px] font-medium text-slate-300",children:"Business name *"}),e.jsx("input",{required:!0,value:n,onChange:t=>u(t.target.value),className:"w-full rounded-lg border border-purple-900/70 bg-black/60 px-3 py-1.5 text-xs text-slate-50 outline-none placeholder:text-slate-500 focus:border-purple-400 focus:ring-2 focus:ring-purple-500/70",placeholder:"Business name"})]}),e.jsxs("div",{className:"grid gap-2 sm:grid-cols-[2fr,1fr]",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[11px] font-medium text-slate-300",children:"City"}),e.jsx("input",{value:a,onChange:t=>i(t.target.value),className:"w-full rounded-lg border border-purple-900/70 bg-black/60 px-3 py-1.5 text-xs text-slate-50 outline-none placeholder:text-slate-500 focus:border-purple-400 focus:ring-2 focus:ring-purple-500/70",placeholder:"e.g. Jacksonville"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[11px] font-medium text-slate-300",children:"State"}),e.jsx("input",{value:r,onChange:t=>c(t.target.value.toUpperCase()),maxLength:2,className:"w-full rounded-lg border border-purple-900/70 bg-black/60 px-3 py-1.5 text-xs text-slate-50 outline-none placeholder:text-slate-500 focus:border-purple-400 focus:ring-2 focus:ring-purple-500/70",placeholder:"FL"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[11px] font-medium text-slate-300",children:"Website or social link"}),e.jsx("input",{value:p,onChange:t=>d(t.target.value),className:"w-full rounded-lg border border-purple-900/70 bg-black/60 px-3 py-1.5 text-xs text-slate-50 outline-none placeholder:text-slate-500 focus:border-purple-400 focus:ring-2 focus:ring-purple-500/70",placeholder:"https://..."})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[11px] font-medium text-slate-300",children:"Any notes"}),e.jsx("textarea",{value:x,onChange:t=>m(t.target.value),rows:3,className:"w-full rounded-lg border border-purple-900/70 bg-black/60 px-3 py-1.5 text-xs text-slate-50 outline-none placeholder:text-slate-500 focus:border-purple-400 focus:ring-2 focus:ring-purple-500/70",placeholder:"What do you love about this place?"})]}),e.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("button",{type:"submit",disabled:b,className:"inline-flex items-center justify-center rounded-lg bg-purple-500 px-3 py-1.5 text-xs font-semibold text-black shadow-[0_0_18px_rgba(147,51,234,0.8)] hover:brightness-110 disabled:opacity-60",children:b?"Sending…":"Submit suggestion"}),h&&e.jsx("p",{className:"text-[11px] text-emerald-300",children:h}),y&&e.jsx("p",{className:"text-[11px] text-red-300",children:y})]})]})]})}export{k as default};
